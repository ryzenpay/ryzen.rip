#this is the build command for the search page, this is built into the sync script
cd ../
# Create the initial search.html
tree -H '.' -L 1 --noreport --dirsfirst -T 'Downloads' -s -D --charset utf-8 -I "*.html" -o search.html

# Find all directories and create index.html in each
find . -type d | while read -r dir; do
    if [ "$dir" != "." ]; then
        tree -H '.' -L 1 --noreport --dirsfirst -T "${dir#./}" -s -D --charset utf-8 -I "*.html" -o "$dir/index.html"
        echo "<style> html { color-scheme: light dark; } body { width: 35em; margin: 0 auto; font-family: Tahoma, Verdana, Arial, sans-serif; }</style>" >> $dir/index.html
    fi
done
echo "completed build"
